<!-- Cabeçalho base -->
<head xmlns:th="http://www.thymeleaf.org" th:fragment="cabecalho(titulo)">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <title th:text="${titulo}"></title>
</head>

<!-- Logout -->
<form xmlns:th="http://www.thymeleaf.org" th:fragment="form-logout"
      th:action="@{/logout}" method="post" class="text-end mb-3">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    <button type="submit" class="btn btn-dark">
        <i class="bi bi-box-arrow-right me-1"></i> Sair
    </button>
</form>

<!-- Saudação / Avatar -->
<div xmlns:th="http://www.thymeleaf.org" th:fragment="saudacoes(usuario)">
    <div class="d-flex align-items-center p-4 bg-white rounded-3 shadow-sm mb-4">
        <img
                th:src="@{/images/avatar.png}"
                alt="Foto do perfil"
                class="rounded-circle me-3 border"
                style="width:72px;height:72px;object-fit:cover;"
        />

        <div class="flex-grow-1">
            <h2 class="h4 mb-1">
                Olá,
                <span th:text="${usuario != null && usuario.nomePerfil != null ? usuario.nomePerfil : 'Administrador'}"></span>!
                <span class="badge text-bg-primary ms-2"
                      th:if="${usuario != null && usuario.funcoes != null && !#lists.isEmpty(usuario.funcoes)}"
                      th:text="${usuario.funcoes[0].nome}">
        </span>
            </h2>
            <div class="text-muted">Bem-vindo ao seu painel de controle</div>
        </div>
    </div>
</div>

<!-- Voltar -->
<div xmlns:th="http://www.thymeleaf.org" th:fragment="voltar(to)">
    <a class="btn btn-outline-secondary" th:href="${to} == null ? @{/index} : ${to}">⟵ Voltar</a>
</div>

<!-- Page header -->
<div xmlns:th="http://www.thymeleaf.org" th:fragment="page-header(titulo, destino)">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 th:text="${titulo}">Título</h1>
        <div th:replace="~{fragmentos :: voltar(${destino})}"></div>
    </div>
</div>

<!-- Alerts -->
<div xmlns:th="http://www.thymeleaf.org" th:fragment="alerts">
    <div th:if="${msg}" class="alert alert-success alert-dismissible fade show" role="alert" th:text="${msg}"></div>
    <div th:if="${erro}" class="alert alert-danger alert-dismissible fade show" role="alert" th:text="${erro}"></div>
</div>

<!-- Scripts -->
<div xmlns:th="http://www.thymeleaf.org" th:fragment="rodape-scripts">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</div>
