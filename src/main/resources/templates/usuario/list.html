<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragmentos :: cabecalho('Usuários')}"></head>
<body class="container mt-4">

<form th:replace="~{fragmentos :: form-logout}"></form>
<h1>Usuários</h1>

<div class="mb-3">
    <a class="btn btn-primary" th:href="@{/usuarios/new}">Novo Usuário</a>
</div>

<table class="table table-striped">
    <thead>
    <tr>
        <th>ID</th><th>Username</th><th>Nome Perfil</th><th>Funções</th><th style="width:220px">Ações</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="u : ${usuarios}">
        <td th:text="${u.id}">1</td>
        <td th:text="${u.username}">admin</td>
        <td th:text="${u.nomePerfil}">Administrador</td>
        <td>
        <span th:each="f,iter : ${u.funcoes}">
          <span th:text="${f.nome}">ADMIN</span><span th:if="${!iter.last}">, </span>
        </span>
        </td>
        <td>
            <a class="btn btn-sm btn-outline-secondary" th:href="@{/usuarios/{id}/edit(id=${u.id})}">Editar</a>
            <form th:action="@{/usuarios/{id}/delete(id=${u.id})}" method="post" style="display:inline">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button class="btn btn-sm btn-outline-danger" onclick="return confirm('Excluir este usuário?')">Excluir</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

</body>
</html>
