<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragmentos :: cabecalho('Motos')}"></head>
<body class="container mt-4">
<form th:replace="~{fragmentos :: form-logout}"></form>

<div th:replace="~{fragmentos :: page-header('Motos', @{/index})}"></div>
<div th:replace="~{fragmentos :: alerts}"></div>

<div class="mb-3">
    <a class="btn btn-primary" th:href="@{/motos/new}">Nova Moto</a>
</div>

<table class="table table-striped">
    <thead>
    <tr>
        <th>ID</th><th>Modelo</th><th>Placa</th><th>Pátio</th><th>Status</th>
        <th>Pos. X</th><th>Pos. Y</th><th style="width:260px">Ações</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="m : ${motos}">
        <td th:text="${m.id}">1</td>
        <td th:text="${m.modelo}">PCX</td>
        <td th:text="${m.placa}">ABC-1234</td>
        <td th:text="${m.patio != null ? m.patio.nome : '-'}">Pátio 1</td>
        <td th:text="${m.status != null ? m.status.nome : '-'}">ATIVA</td>
        <td th:text="${m.posX}">0</td>
        <td th:text="${m.posY}">0</td>
        <td>
            <a class="btn btn-sm btn-outline-secondary" th:href="@{/motos/{id}/edit(id=${m.id})}">Editar</a>

            <form th:action="@{/motos/{id}/delete(id=${m.id})}" method="post" style="display:inline">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button class="btn btn-sm btn-outline-danger"
                        onclick="return confirm('Excluir esta moto?')">Excluir</button>
            </form>

            <!-- NOVOS BOTÕES -->
            <form th:action="@{/motos/{id}/ativar(id=${m.id})}" method="post" style="display:inline">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button class="btn btn-sm btn-success">Ativar</button>
            </form>

            <form th:action="@{/motos/{id}/manutencao(id=${m.id})}" method="post" style="display:inline">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                <button class="btn btn-sm btn-warning">Manutenção</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>

<div th:replace="~{fragmentos :: rodape-scripts}"></div>
</body>
</html>
